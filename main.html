<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title>PHAN</title>
    <meta name="comp1930 boilerplate code" content="my bcit project">
    <meta name="author" content="BCIT">

    <!-- Bootstrap for Mobile-first -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-firestore.js"></script>
    <!-- The Firebase Authentication UI Library -->
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
    <!-- Initialize Firebase -->
    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyAV_BwZomzyJvfN1kQgx_xdCR10h33qaTc",
            authDomain: "phan-fde9a.firebaseapp.com",
            databaseURL: "https://phan-fde9a.firebaseio.com",
            projectId: "phan-fde9a",
            storageBucket: "phan-fde9a.appspot.com",
            messagingSenderId: "948065763151",
            appId: "1:948065763151:web:1a00bcb2d0a576f7664f3a"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore();
    </script>
    <style>
        * {
            padding: 2%;
        }

        #button1,
        #clear {
            margin-top: 5%;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        #value {
            display: block;
            text-align: center;
            margin-left: auto;
            margin-right: auto;
        }

        #title,
        #data {
            text-align: center;
        }
    </style>
</head>

<body>
    <h1 id="title">PHAN</h1>
    <div id="data">
        <h3>Let's read from the database:<br><span id="stuff">stuff</span></h3>
    </div>
    <input type="number" id="value">
    <button id="button1">Submit</button>
    <button id="clear">Clear Time!</button>
    <script src="scripts/create_user.js"></script>
    <script src="scripts/app.js"></script>
    <script>
        createUser();
    </script>
    <script>
        updateTimeC();
    </script>
    <script>
        $(clear).click(function clear() {
            firebase.auth().onAuthStateChanged(function (user) {
                db.collection('users').doc(user.uid).set({
                    "counts": 0,
                }, {
                    merge: true

                });
            });
        });
        var counts = 0;
        firebase.auth().onAuthStateChanged(function (user) {

            db.collection('users').doc(user.uid).onSnapshot(function (snap) {

                if (snap.get("counts") != null) {
                    counts = snap.get("counts");
                }
            });
        });
        $(button1).click(function updateTimeS(time) {
            firebase.auth().onAuthStateChanged(function (user) {

                db.collection('users').doc(user.uid).set({
                    "counts": (parseInt(counts) + parseInt(document.getElementById("value")
                        .value)),
                }, {
                    merge: true
                });




            });
        });
        //Convenience.
        document.getElementById("value").addEventListener("keydown", function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                $(button1).click();
            }


        })
    </script>

</body>


</html>